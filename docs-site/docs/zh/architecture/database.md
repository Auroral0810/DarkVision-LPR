# 数据库设计

系统核心数据存储采用 **MySQL 8.0**，遵循第三范式设计，确保数据的一致性与完整性。

## ER 图 (逻辑模型)

> (此处可插入 ER 图图片)

## 核心数据表设计

### 1. 用户与权限
| 表名 | 描述 |
| :--- | :--- |
| `users` | 核心用户表，存储账号、密码哈希、状态等。 |
| `user_profiles` | 用户扩展信息（实名认证数据、联系方式）。 |
| `roles` | 角色定义表（Admin, User, VIP）。 |
| `permissions` | 权限点定义。 |
| `user_memberships` | 会员订阅状态记录。 |

### 2. 识别业务
| 表名 | 描述 |
| :--- | :--- |
| `recognition_tasks` | 识别任务主表，记录任务类型、状态、耗时。 |
| `recognition_results` | 识别结果详情，包含车牌号、置信度、图片路径。 |
| `recognition_statistics`| 每日用量统计，用于限额控制。 |

### 3. 订单与财务
| 表名 | 描述 |
| :--- | :--- |
| `packages` | 套餐定义（价格、配额、功能特性）。 |
| `orders` | 订单记录，关联用户与支付状态。 |
| `payments` | 支付流水记录。 |

### 4. 日志与审计
| 表名 | 描述 |
| :--- | :--- |
| `operation_logs` | 关键操作审计日志（谁、何时、做了什么）。 |
| `login_logs` | 用户登录历史记录。 |

## 缓存设计 (Redis)

- **Session**: 存储 JWT 黑名单（登出失效）。
- **Quota**: 每日识别次数计数器（原子递增）。
- **Verification Code**: 验证码临时存储（TTL）。
- **Task Queue**: 异步识别任务队列。
